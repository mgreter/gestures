(function(){var b={add:function(b){var d=b.handler;b.handler=function(b){var c=d.call(this,b);if(!1==c||b.isPropagationStopped()){var g=b.type,f=b.isTrigger,a=b.isPropagationStopped,n=b.isImmediatePropagationStopped;b.type="trap"+b.type;b.isPropagationStopped=function(){return!1};b.isImmediatePropagationStopped=function(){return!1};jQuery(b.currentTarget).parent().trigger(b);b.type=g;b.isTrigger=f;a&&b.stopPropagation();n&&b.stopImmediatePropagation();if("undefined"!=typeof c)return c}}}};jQuery.event.special.mouseup=
b;jQuery.event.special.mouseout=b;jQuery.event.special.mouseover=b;jQuery.event.special.mousemove=b;jQuery.event.special.mousedown=b;jQuery.event.special.touchend=b;jQuery.event.special.touchmove=b;jQuery.event.special.touchstart=b;jQuery.event.special.touchcancel=b})();if("undefined"==typeof OCBNET)var OCBNET={};
(function(b){var a=[],d=0,e={};OCBNET.Gestures=function(c,g){this.el=c;this.config=b.extend({"native":{},swipeSectors:2,swipeMinDistance:20},g,!0);this.id=d++;a.push(this);this.maximum=this.fingers=0;this.finger={};this.ordered=[];this.surface=e;b(c).bind("dragstart",function(){return!1});for(var f=0,k=this.init.length;f<k;f++)this.init[f].apply(this,arguments)};OCBNET.Gestures.fingerup=function(b){for(var g=a.length;g--;)a[g].fingerUp(b)};OCBNET.Gestures.fingermove=function(b){for(var g=a.length;g--;)a[g].fingerMove(b)};
OCBNET.Gestures.fingersmove=function(c){for(var g=a.length;g--;)for(var f in a[g].finger){var k=b.Event("fingermove",{id:f,x:c.x,y:c.y,originalEvent:c});a[g].fingerMove(k)}};OCBNET.Gestures.fingersup=function(c){for(var g=a.length;g--;)for(var f in a[g].finger){var k=b.Event("fingerup",{id:f,x:c.x,y:c.y,originalEvent:c});a[g].fingerUp(k)}};OCBNET.Gestures.Finger=function(b){this.id=b.id;this.x=b.x;this.y=b.y};(function(a){a.init=[];a.fingerDown=function(g){var a=new OCBNET.Gestures.Finger(g);g=new b.Event("handstart",
{finger:a,gesture:this,originalEvent:g});b(this.el).triggerHandler(g);g.isDefaultPrevented()||this.hasFinger(a.id)||(this.start={center:this.getCenter(),rotation:this.getRotation(),distance:this.getDistance()},this.offset={x:0,y:0},this.center=this.start.center,this.distance=this.rotation=0,this.fingers++,this.maximum<this.fingers&&(this.maximum=this.fingers),this.ordered.push(a.id),this.finger[a.id]=a,e[a.id]=a,this.start={center:this.getCenter(),rotation:this.getRotation(),distance:this.getDistance()},
this.move=b.extend({},this.start))};a.fingerMove=function(a){var f=a.id;if(this.hasFinger(f)){f=this.getFinger(f);f.x=a.x;f.y=a.y;this.move={center:this.getCenter(),rotation:this.getRotation(),distance:this.getDistance()};this.offset={x:this.move.center.x-this.start.center.x,y:this.move.center.y-this.start.center.y};this.center=this.move.center;this.rotation=this.move.rotation-this.start.rotation;this.distance=this.move.distance-this.start.distance;var c=Math.abs(this.offset.x),d=Math.abs(this.offset.y);
b(this.el).triggerHandler(new b.Event("handmove",{finger:f,gesture:this,originalEvent:a}));"undefined"==typeof this.swipeSector&&Math.sqrt(c*c+d*d)>this.config.swipeMinDistance&&(c=180*Math.atan2(d,c)/Math.PI,this.swipeSector=parseInt(c/90*this.config.swipeSectors,10),this.swipeSector=Math.min(this.swipeSector,this.config.swipeSectors-1));"undefined"!=typeof this.swipeSector&&b(this.el).triggerHandler(new b.Event("handswipe",{finger:f,gesture:this,originalEvent:a}));1<this.fingers&&b(this.el).triggerHandler(new b.Event("handtransform",
{finger:f,gesture:this,originalEvent:a}))}};a.fingerUp=function(a){var c=a.id;this.hasFinger(c)&&(c=this.getFinger(c),c.x=a.x,c.y=a.y,this.stop={center:this.getCenter(),rotation:this.getRotation(),distance:this.getDistance()},this.offset={x:this.stop.center.x-this.start.center.x,y:this.stop.center.y-this.start.center.y},this.center=this.stop.center,this.rotation=this.stop.rotation-this.start.rotation,this.distance=this.stop.distance-this.start.distance,a=new b.Event("handstop",{finger:c,gesture:this}),
b(this.el).triggerHandler(a),this.fingers--,delete this.offset,delete this.rotation,delete this.distance,delete this.swipeSector,a=b.inArray(c.id,this.ordered),this.ordered.splice(a,1),delete this.finger[c.id],delete e[c.id])};a.getCenter=function(){var a={x:0,y:0},b;for(b in this.finger){var c=this.finger[b];a.x+=c.x;a.y+=c.y}this.fingers&&(a.x/=this.fingers,a.y/=this.fingers);return a};a.getRotation=function(){if(2>this.fingers)return 0;for(var a=0,b=0,c=0,d=0,e=this.ordered.length;d<e;d++)for(var l=
this.finger[this.ordered[d]],h=d+1;h<e;h++){c++;var m=this.finger[this.ordered[h]],a=a+(m.x-l.x),b=b+(m.y-l.y)}return 180*Math.atan2(b/c,a/c)/Math.PI};a.getDistance=function(){if(2>this.fingers)return 0;for(var a=0,b=0,c=0,d=0,e=this.ordered.length;d<e;d++)for(var l=this.finger[this.ordered[d]],h=d+1;h<e;h++){c++;var m=this.finger[this.ordered[h]],a=a+Math.abs(m.x-l.x),b=b+Math.abs(m.y-l.y)}a/=c;b/=c;return Math.sqrt(a*a+b*b)};a.hasFinger=function(a){return a in this.finger};a.getFinger=function(a){return this.finger[a]}})(OCBNET.Gestures.prototype);
b.fn.gesture=function(a){b(this).each(function(d,f){var e=b(f).data("gesture");if("undefined"==typeof e)e=new OCBNET.Gestures(f,a),b(f).data("gesture",e);else{if(0<e.fingers)throw"fatal: live config change";b.extend(e.config,a,!0)}});return this}})(jQuery);
(function(b){"ontouchstart"in window||window.navigator.msPointerEnabled&&0<window.navigator.msMaxTouchPoints||(function(a){a.init.push(function(a){var e=this;b(a).bind("mousedown",function(a){var d=b(a.currentTarget).data("gesture");d!==e&&eval("alert('assertion')");a=new b.Event("fingerdown",{type:"mouse",id:a.which,x:a.screenX,y:a.screenY,originalEvent:a});d.fingerDown(a)})})}(OCBNET.Gestures.prototype),b(document).bind("mouseup trapmouseup",function(a){0>a.clientX||0>a.clientY||a.clientX>b(window).width()||
a.clientY>b(window).height()?(a=new b.Event("fingersup",{type:"mouse",x:a.screenX,y:a.screenY,originalEvent:a}),OCBNET.Gestures.fingersup(a)):(a=new b.Event("fingerup",{type:"mouse",id:a.which,x:a.screenX,y:a.screenY,originalEvent:a}),OCBNET.Gestures.fingerup(a))}),b(document).bind("mousemove",function(a){a=b.Event("fingersmove",{type:"mouse",x:a.screenX,y:a.screenY,originalEvent:a});OCBNET.Gestures.fingersmove(a)}))})(jQuery);
(function(b){"ontouchstart"in window&&!(window.navigator.msPointerEnabled&&0<window.navigator.msMaxTouchPoints)&&(function(a){a.init.push(function(a){var e=this;b(a).bind("touchstart",function(a){var d=a.originalEvent.changedTouches||[],f=b(a.currentTarget).data("gesture");f!==e&&eval("alert('assertion')");b(d).each(function(d,e){var g=new b.Event("fingerdown",{type:"touch",x:e.screenX,y:e.screenY,id:e.identifier,originalEvent:a});f.fingerDown(g)})});b(a).bind("handswipe",function(a){2==a.gesture.config.swipeSectors&&
(0===a.gesture.swipeSector&&a.gesture.config["native"].panY&&a.preventDefault(),1===a.gesture.swipeSector&&a.gesture.config["native"].panX&&a.preventDefault())})})}(OCBNET.Gestures.prototype),b(document).bind("touchend touchcancel",function(a){b(a.originalEvent.changedTouches||[]).each(function(d,e){var c=b.Event("fingerup",{type:"touch",x:e.screenX,y:e.screenY,id:e.identifier,originalEvent:a});OCBNET.Gestures.fingerup(c)})}),b(document).bind("touchmove",function(a){b(a.originalEvent.changedTouches||
[]).each(function(d,e){var c=b.Event("fingermove",{type:"touch",x:e.screenX,y:e.screenY,id:e.identifier,originalEvent:a});OCBNET.Gestures.fingermove(c)})}))})(jQuery);
(function(b){window.navigator.msPointerEnabled&&0<window.navigator.msMaxTouchPoints&&(function(a){a.init.push(function(a){var e=this;b(a).bind("MSPointerDown",function(a){var d=a.originalEvent,f=b(a.currentTarget).data("gesture");f!==e&&eval("alert('assertion')");a=new b.Event("fingerdown",{type:"pointer",x:d.pageX,y:d.pageY,id:d.pointerId,originalEvent:a});f.fingerDown(a)}).css("msTouchAction","none")})}(OCBNET.Gestures.prototype),b(document).bind("MSPointerUp",function(a){var d=a.originalEvent;
a=new b.Event("fingerup",{type:"pointer",x:d.pageX,y:d.pageY,id:d.pointerId,originalEvent:a});OCBNET.Gestures.fingerup(a)}),b(document).bind("MSPointerMove",function(a){var d=a.originalEvent;a=b.Event("fingermove",{type:"pointer",x:d.pageX,y:d.pageY,id:d.pointerId,originalEvent:a});OCBNET.Gestures.fingermove(a)}))})(jQuery);
