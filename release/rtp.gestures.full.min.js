if("undefined"==typeof OCBNET)var OCBNET={};var isChromium=window.chrome,vendorName=window.navigator.vendor,decideScrollOrPanOnFirst=null!==isChromium&&"Google Inc."===vendorName;
(function(b){var a={},c=[],f=0,g={};OCBNET.Gestures=function(a,d){this.el=a;this.config=b.extend({"native":{},swipeSectors:2,swipeMinDistance:15,decideOnFirst:decideScrollOrPanOnFirst},d,!0);this.id=f++;c.push(this);this.maximum=this.fingers=0;this.finger={};this.ordered=[];this.surface=g;b(a).bind("dragstart",function(){return!1});for(var e=0,h=this.init.length;e<h;e++)this.init[e].apply(this,arguments)};OCBNET.Gestures.fingerup=function(b){for(var d=c.length;d--;)c[d].fingerUp(b);a[b.id]&&(a[b.id].x=
b.x,a[b.id].y=b.y)};OCBNET.Gestures.fingermove=function(b){for(var d=g[b.id],e=0,h=d.length;e<h&&(d[e].fingerMove(b),!b.isPropagationStopped());e++);a[b.id].x=b.x;a[b.id].y=b.y};OCBNET.Gestures.fingersmove=function(a){for(var d in g){var e=b.Event("fingermove",{id:d,x:a.x,y:a.y,originalEvent:a});OCBNET.Gestures.fingermove(e)}};OCBNET.Gestures.fingersup=function(a){for(var d=c.length;d--;)for(var e in c[d].finger){var h=b.Event("fingerup",{id:e,x:a.x,y:a.y,originalEvent:a});c[d].fingerUp(h)}};OCBNET.Gestures.Finger=
function(b){this.id=b.id;this.x=b.x;this.y=b.y};(function(c){c.init=[];c.fingerDown=function(d){var e=new OCBNET.Gestures.Finger(d);"undefined"==typeof a[d.id]&&(a[d.id]=new OCBNET.Gestures.Finger(d));d=new b.Event("handstart",{dx:0,dy:0,finger:e,gesture:this,originalEvent:d});b(this.el).triggerHandler(d);d.isDefaultPrevented()||this.hasFinger(e.id)||(this.fingers++,this.maximum<this.fingers&&(this.maximum=this.fingers),this.ordered.push(e.id),this.finger[e.id]=e,this.start={center:this.getCenter(),
rotation:this.getRotation(),distance:this.getDistance()},this.offset={x:0,y:0},this.center=this.start.center,this.distance=this.rotation=0,g[e.id]||(g[e.id]=[]),g[e.id].push(this),this.move=b.extend({},this.start))};c.fingerMove=function(d){var e=d.id;if(this.hasFinger(e)){var h=this.getFinger(e);h.x=d.x;h.y=d.y;var g=a[e].x-d.x,c=a[e].y-d.y;this.move={center:this.getCenter(),rotation:this.getRotation(),distance:this.getDistance()};this.offset={x:this.move.center.x-this.start.center.x,y:this.move.center.y-
this.start.center.y};this.center=this.move.center;this.rotation=this.move.rotation-this.start.rotation;this.distance=this.move.distance-this.start.distance;var e=Math.abs(this.offset.x),f=Math.abs(this.offset.y);d={dx:g,dy:c,finger:h,gesture:this,originalEvent:d};b(this.el).triggerHandler(new b.Event("handmove",d));"undefined"==typeof this.swipeSector&&(this.config.decideOnFirst||Math.pow(this.config.swipeMinDistance,2)<e*e+f*f)&&(h=180*Math.atan2(f,e)/Math.PI,this.swipeSector=parseInt(h/90*this.config.swipeSectors,
10),this.swipeSector=Math.min(this.swipeSector,this.config.swipeSectors-1));"undefined"!=typeof this.swipeSector&&b(this.el).triggerHandler(new b.Event("handswipe",d));1<this.fingers&&b(this.el).triggerHandler(new b.Event("handtransform",d))}};c.fingerUp=function(d){var e=d.id;if(this.hasFinger(e)){var h=this.getFinger(e);h.x=d.x;h.y=d.y;var c=a[e].x-d.x;d=a[e].y-d.y;this.stop={center:this.getCenter(),rotation:this.getRotation(),distance:this.getDistance()};this.offset={x:this.stop.center.x-this.start.center.x,
y:this.stop.center.y-this.start.center.y};this.center=this.stop.center;this.rotation=this.stop.rotation-this.start.rotation;this.distance=this.stop.distance-this.start.distance;c=new b.Event("handstop",{dx:c,dy:d,finger:h,gesture:this});b(this.el).triggerHandler(c);this.fingers--;delete this.offset;delete this.rotation;delete this.distance;delete this.swipeSector;h=b.inArray(h.id,this.ordered);this.ordered.splice(h,1);delete this.finger[e];h=b.inArray(this,g[e]);-1!=h&&g[e].splice(h,1);0==g[e].length&&
(delete a[e],delete g[e])}};c.getCenter=function(){var d={x:0,y:0},b;for(b in this.finger){var a=this.finger[b];d.x+=a.x;d.y+=a.y}this.fingers&&(d.x/=this.fingers,d.y/=this.fingers);return d};c.getRotation=function(){if(2>this.fingers)return 0;for(var b=0,a=0,g=0,c=0,f=this.ordered.length;c<f;c++)for(var k=this.finger[this.ordered[c]],l=c+1;l<f;l++){g++;var m=this.finger[this.ordered[l]],b=b+(m.x-k.x),a=a+(m.y-k.y)}return 180*Math.atan2(a/g,b/g)/Math.PI};c.getDistance=function(){if(2>this.fingers)return 0;
for(var b=0,a=0,g=0,c=0,f=this.ordered.length;c<f;c++)for(var k=this.finger[this.ordered[c]],l=c+1;l<f;l++){g++;var m=this.finger[this.ordered[l]],b=b+Math.abs(m.x-k.x),a=a+Math.abs(m.y-k.y)}b/=g;a/=g;return Math.sqrt(b*b+a*a)};c.hasFinger=function(b){return b in this.finger};c.getFinger=function(b){return this.finger[b]}})(OCBNET.Gestures.prototype);b.fn.gesture=function(a){b(this).each(function(d,g){var c=b(g).data("gesture");if("undefined"==typeof c)c=new OCBNET.Gestures(g,a),b(g).data("gesture",
c);else{if(0<c.fingers)throw"fatal: live config change";b.extend(c.config,a,!0)}});return this}})(jQuery);
(function(b){"ontouchstart"in window||window.navigator.msPointerEnabled&&0<window.navigator.msMaxTouchPoints||(function(a){a.init.push(function(a){var f=this;b(a).bind("mousedown",function(a){var c=b(a.currentTarget).data("gesture");c!==f&&eval("alert('assertion')");a=new b.Event("fingerdown",{type:"mouse",id:a.which,x:a.screenX,y:a.screenY,originalEvent:a});c.fingerDown(a)})})}(OCBNET.Gestures.prototype),b(document).bind("mouseup trapmouseup",function(a){0>a.clientX||0>a.clientY||a.clientX>b(window).width()||
a.clientY>b(window).height()?(a=new b.Event("fingersup",{type:"mouse",x:a.screenX,y:a.screenY,originalEvent:a}),OCBNET.Gestures.fingersup(a)):(a=new b.Event("fingerup",{type:"mouse",id:a.which,x:a.screenX,y:a.screenY,originalEvent:a}),OCBNET.Gestures.fingerup(a))}),b(document).bind("mousemove",function(a){a=b.Event("fingersmove",{type:"mouse",x:a.screenX,y:a.screenY,originalEvent:a});OCBNET.Gestures.fingersmove(a)}))})(jQuery);
(function(b){"ontouchstart"in window&&!(window.navigator.msPointerEnabled&&0<window.navigator.msMaxTouchPoints)&&(function(a){a.init.push(function(a){var f=this;b(a).bind("touchstart",function(a){var c=a.originalEvent.changedTouches||[],d=b(a.currentTarget).data("gesture");d!==f&&eval("alert('assertion')");b(c).each(function(c,f){var k=new b.Event("fingerdown",{type:"touch",x:f.screenX,y:f.screenY,id:f.identifier,originalEvent:a});d.fingerDown(k)})});b(a).bind("handswipe",function(a){2==a.gesture.config.swipeSectors&&
(0===a.gesture.swipeSector&&a.gesture.config["native"].panY&&a.preventDefault(),1===a.gesture.swipeSector&&a.gesture.config["native"].panX&&a.preventDefault())})})}(OCBNET.Gestures.prototype),b(document).bind("touchend touchcancel",function(a){b(a.originalEvent.changedTouches||[]).each(function(c,f){var g=b.Event("fingerup",{type:"touch",x:f.screenX,y:f.screenY,id:f.identifier,originalEvent:a});OCBNET.Gestures.fingerup(g)})}),b(document).bind("touchmove",function(a){b(a.originalEvent.changedTouches||
[]).each(function(c,f){var g=b.Event("fingermove",{type:"touch",x:f.screenX,y:f.screenY,id:f.identifier,originalEvent:a});OCBNET.Gestures.fingermove(g)})}))})(jQuery);
(function(b){window.navigator.msPointerEnabled&&0<window.navigator.msMaxTouchPoints&&(function(a){a.init.push(function(a){var f=this;b(a).bind("MSPointerDown",function(a){var c=a.originalEvent,d=b(a.currentTarget).data("gesture");d!==f&&eval("alert('assertion')");a=new b.Event("fingerdown",{type:"pointer",x:c.pageX,y:c.pageY,id:c.pointerId,originalEvent:a});d.fingerDown(a)}).css("msTouchAction","none")})}(OCBNET.Gestures.prototype),b(document).bind("MSPointerUp",function(a){var c=a.originalEvent;
a=new b.Event("fingerup",{type:"pointer",x:c.pageX,y:c.pageY,id:c.pointerId,originalEvent:a});OCBNET.Gestures.fingerup(a)}),b(document).bind("MSPointerMove",function(a){var c=a.originalEvent;a=b.Event("fingermove",{type:"pointer",x:c.pageX,y:c.pageY,id:c.pointerId,originalEvent:a});OCBNET.Gestures.fingermove(a)}))})(jQuery);
