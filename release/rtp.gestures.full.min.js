if("undefined"==typeof OCBNET)var OCBNET={};
(function(d){var m={},f=[];OCBNET.Gestures=function(c){this.el=c;this.hands=[];this.maximum=this.fingers=0;this.finger={};this.ordered=[];this.handlers={};this.surface=m;this.elements=f;d(c).bind("fingerup",d.proxy(this.fingerUp,this)).bind("fingerdown",d.proxy(this.fingerDown,this)).bind("dragstart",function(){return!1});for(var a=0,b=this.init.length;a<b;a++)this.init[a].apply(this,arguments);f.push(d(c))};OCBNET.Gestures.Hand=function(){};OCBNET.Gestures.Finger=function(){};(function(c){c.init=
[];c.handler={};c.handle=function(a){var b=a.originalEvent;if(!b.data)if(b.data=!0,b=a.type.replace(/^trap/,""),this.handler[b])this.handler[b].apply(this,arguments);else throw"Gesture cannot handle unknown event",b;};c.fingerDown=function(a){var b=d(a.currentTarget),l=a.finger,b=b.data("gesture"),e=b.handlers;(d.isFunction(e.start)?e.start.call(b,a,l):e.start)&&-1==d.inArray(l.id,b.ordered)&&(b.fingers++,b.maximum<b.fingers&&(b.maximum=b.fingers),b.cached={},b.ordered.push(l.id),b.finger[l.id]=l,
m[l.id]=l,b.start={center:b.getCenter(),rotation:b.getRotation(),distance:b.getDistance()},b.move=d.extend({},b.start))};c.fingersMove=function(a,b){for(var l=f.length;l--;){var e=[],g=f[l].data("gesture"),c=g.handlers,h;for(h in g.finger)for(var k=a.length;k--;)a[k].id==h&&e.push(a[k]);if(e.length){delete g.cached.center;for(k=e.length;k--;){var m=e[k];d(f[l]).triggerHandler(new d.Event("fingermove",{finger:m}));g.finger[m.id]=m}g.move={center:g.getCenter(),rotation:g.getRotation(),distance:g.getDistance()};
g.center=g.move.center;g.rotation=g.move.rotation;g.distance=g.move.distance;var m=g.move.center.y,n=g.start.center.y,k=Math.abs(g.move.center.x-g.start.center.x),m=Math.abs(m-n);d(f[l]).triggerHandler(new d.Event("handmove",{gesture:g,fingers:e}));d.isFunction(c.move)&&c.move.call(g,e,b);d.isFunction(c.swipe)&&("undefined"==typeof g.swipeSector&&20<Math.sqrt(k*k+m*m)&&(k=180*Math.atan2(m,k)/Math.PI,g.swipeSector=parseInt(2*(k/90),10),g.swipeSector=Math.min(g.swipeSector,1)),"undefined"!=typeof g.swipeSector&&
(c.swipe.call(g,g.swipeSector,e,b),d(f[l]).triggerHandler(new d.Event("handswipe",{gesture:g,fingers:e}))));d.isFunction(c.transform)&&c.transform.call(g,e,b);d(f[l]).triggerHandler(new d.Event("handtransform",{gesture:g,fingers:e}))}}};c.fingerUp=function(a){var b=d(a.currentTarget),c=a.finger,e=b.data("gesture"),g=e.handlers,f=d.inArray(c.id,e.ordered);-1!=f&&(d.isFunction(g.stop)&&g.stop.call(e,c,a),d(b).triggerHandler(new d.Event("handstop",{gesture:e,finger:c})),e.stop={center:e.getCenter(),
rotation:e.getRotation(),distance:e.getDistance()},e.center=e.stop.center,e.rotation=e.stop.rotation,e.distance=e.stop.distance,delete e.swipeSector,e.fingers--,e.ordered.splice(f,1),delete e.finger[c.id],delete m[c.id])};c.getCenter=function(){if(this.cached.center)return this.cached.center;var a={},b=["page","client","screen"],c=["X","Y"],e;for(e in this.finger)for(var d=this.finger[e],f=b.length;f--;)for(var h=c.length;h--;){var k=b[f]+c[h];a[k]||(a[k]=0);a[k]+=d[k]/this.fingers}a.x=a.screenX;
a.y=a.screenY;return this.cached.center=a};c.getRotation=function(){if(this.cached.rotation)return this.cached.rotation;if(2>this.fingers)return 0;for(var a=0,b=0,c=0,e=0,d=this.ordered.length;e<d;e++)for(var f=this.finger[this.ordered[e]],h=e+1;h<d;h++){c++;var k=this.finger[this.ordered[h]],a=a+(k.screenX-f.screenX),b=b+(k.screenY-f.screenY)}return 180*Math.atan2(b/c,a/c)/Math.PI};c.getDistance=function(){if(this.cached.distance)return this.cached.distance;if(2>this.fingers)return 0;for(var a=0,
b=0,c=0,e=0,d=this.ordered.length;e<d;e++)for(var f=this.finger[this.ordered[e]],h=e+1;h<d;h++){c++;var k=this.finger[this.ordered[h]],a=a+Math.abs(k.screenX-f.screenX),b=b+Math.abs(k.screenY-f.screenY)}a/=c;b/=c;return Math.sqrt(a*a+b*b)}})(OCBNET.Gestures.prototype);d.fn.gesture=function(c){d(this).each(function(a,b){var l=d(b).data("gesture");"undefined"==typeof l&&(l=new OCBNET.Gestures(b),d(b).data("gesture",l));d.extend(l.handlers,c)})}})(jQuery);
(function(){var d={add:function(d){var f=d.handler;d.handler=function(c){var a=f.call(this,c);if(!1==a||c.isPropagationStopped()){var b=c.type,d=c.isTrigger,e=c.isPropagationStopped,g=c.isImmediatePropagationStopped;c.type="trap"+c.type;c.isPropagationStopped=function(){return!1};c.isImmediatePropagationStopped=function(){return!1};jQuery(c.target).trigger(c);c.type=b;c.isTrigger=d;e&&c.stopPropagation();g&&c.stopImmediatePropagation();if("undefined"!=typeof a)return a}}}};jQuery.event.special.mouseup=
d;jQuery.event.special.mouseout=d;jQuery.event.special.mouseover=d;jQuery.event.special.mousemove=d;jQuery.event.special.mousedown=d;jQuery.event.special.touchend=d;jQuery.event.special.touchmove=d;jQuery.event.special.touchstart=d;jQuery.event.special.touchcancel=d})();
(function(d){(function(m){var f=m.handler;if(!("ontouchstart"in window)){var c=function(a,b){a.button&&!a.originalEvent.which&&(a.button&1&&!b[1]?a.which=1:a.button&4&&!b[2]?a.which=2:a.button&2&&!b[3]&&(a.which=3))};f.mousewheel=function(a,b,c,e){b=d(a.data.el).data("gesture");for(var g=b.elements,f=g.length;f--;){b=g[f].data("gesture");var h=b.handlers;b.fingers&&(b.cached.rotation||(b.cached.rotation=0),b.cached.distance||(b.cached.distance=0),b.cached.rotation+=3*c,b.cached.distance+=5*e,b.move=
{center:b.getCenter(),rotation:b.getRotation(),distance:b.getDistance()},b.center=b.move.center,b.rotation=b.move.rotation,b.distance=b.move.distance,d.isFunction(h.transform)&&h.transform.call(b,b.finger,a))}};f.mousemove=function(a){var b=a.which,c=a.data.el,e=d(c).data("gesture"),g=[];for(b in e.surface)g.push({el:c,id:b,type:a.type,screenX:a.screenX,screenY:a.screenY,timeStamp:a.timeStamp,originalEvent:a.originalEvent});e.fingersMove(g,a)};f.mousedown=function(a){var b=a.which,l=a.currentTarget,
e=d(l).data("gesture");c(a,e.surface);0!=a.button&&a.preventDefault();var g=function(a){parseInt(b)===parseInt(a.which)&&e.handle.apply(e,arguments)},f=function(a){e.handle.apply(e,arguments)},h={el:l,id:b,handler:g,mover:f};a={el:l,id:a.which,type:a.type,screenX:a.screenX,screenY:a.screenY,timeStamp:a.timeStamp,originalEvent:a.originalEvent};var k=new d.Event("fingerdown",{finger:a});-1==d.inArray(a.id,e.ordered)&&(d(l).bind("mouseup",h,g).bind("mousemove",h,f).bind("mousewheel",h,g).bind("trapmouseup",
h,g).bind("trapmousemove",h,f).bind("trapmousewheel",h,g),d(document).bind("mouseup",h,g).bind("mousemove",h,f).bind("mousewheel",h,g).bind("trapmouseup",h,g).bind("trapmousemove",h,f).bind("trapmousewheel",h,g));d(l).trigger(k)};f.mouseup=function(a){var b={};b[a.which]=a.data;0>a.clientX||0>a.clientY||a.clientX>d(window).width()||d(window).height();for(var c in b){var e=b[c],g=e.el,f=e.mover,e=e.handler;d(g).data("hand");var h={el:g,id:parseInt(c),type:a.type,screenX:a.screenX,screenY:a.screenY,
timeStamp:a.timeStamp,originalEvent:a.originalEvent},h=new d.Event("fingerup",{finger:h});d(g).trigger(h);d(g).unbind("mouseup",e).unbind("mousemove",f).unbind("mousewheel",e).unbind("trapmouseup",e).unbind("trapmousemove",f).unbind("trapmousewheel",e);d(document).unbind("mouseup",e).unbind("mousemove",f).unbind("mousewheel",e).unbind("trapmouseup",e).unbind("trapmousemove",f).unbind("trapmousewheel",e)}};m.init.push(function(a){d(a).bind("mousedown",d.proxy(this.handle,this))})}})(OCBNET.Gestures.prototype)})(jQuery);
(function(d){(function(m){var f=m.handler;f.touchstart=function(c){var a=c.currentTarget;d(c.originalEvent.changedTouches||[]).each(function(b,f){var e=new d.Event("fingerdown",{finger:{el:a,id:f.identifier,type:c.type,screenX:f.screenX,screenY:f.screenY,timeStamp:c.timeStamp,originalEvent:c.originalEvent}});d(a).trigger(e)})};f.touchend=function(c){var a=c.currentTarget;d(c.originalEvent.changedTouches||[]).each(function(b,f){var e=new d.Event("fingerup",{finger:{id:f.identifier,type:c.type,screenX:f.screenX,
screenY:f.screenY,timeStamp:c.timeStamp,originalEvent:c.originalEvent}});d(a).trigger(e)})};f.touchmove=function(c){var a=c.currentTarget,b=d(a).data("gesture"),f=[];d(c.originalEvent.changedTouches||[]).each(function(b,d){f.push({el:a,id:d.identifier,type:c.type,screenX:d.screenX,screenY:d.screenY,timeStamp:c.timeStamp,originalEvent:c.originalEvent})});b.fingersMove(f,c)};f.touchcancel=f.touchend;m.init.push(function(c){var a=d.proxy(this.handle,this),b=["start","move","end","cancel"],f;for(f in b){var e=
b[f];d(c).bind("touch"+e,a).bind("traptouch"+e,a)}})})(OCBNET.Gestures.prototype)})(jQuery);(function(d){(function(d){var f=d.handler;f.touchstart=function(c){return!0};f.touchend=function(c){return!0};f.MSPointerDown=function(c){alert(3);return!0};d.init.push(function(c){return!0})})(OCBNET.Gestures.prototype)})(jQuery);
