if("undefined"==typeof OCBNET)var OCBNET={};var isChromium=window.chrome,vendorName=window.navigator.vendor,decideScrollOrPanOnFirst=null!==isChromium&&"Google Inc."===vendorName;
(function(d){var e={},k=[],g=0,f={};OCBNET.Gestures=function(c,a){this.el=c;this.config=d.extend({"native":{},swipeSectors:2,swipeMinDistance:15,decideOnFirst:decideScrollOrPanOnFirst},a,!0);this.id=g++;k.push(this);this.maximum=this.fingers=0;this.finger={};this.ordered=[];this.surface=f;d(c).bind("dragstart",function(){return!1});for(var b=0,h=this.init.length;b<h;b++)this.init[b].apply(this,arguments)};OCBNET.Gestures.fingerup=function(c){for(var a=k.length;a--;)k[a].fingerUp(c);e[c.id]&&(e[c.id].x=
c.x,e[c.id].y=c.y)};OCBNET.Gestures.fingermove=function(c){var a=f[c.id];if("undefined"!=typeof a){for(var b=0,h=a.length;b<h&&(a[b].fingerMove(c),!c.isPropagationStopped());b++);e[c.id].x=c.x;e[c.id].y=c.y}};OCBNET.Gestures.fingersmove=function(c){for(var a in f){var b=d.Event("fingermove",{id:a,x:c.x,y:c.y,originalEvent:c});OCBNET.Gestures.fingermove(b)}};OCBNET.Gestures.fingersup=function(c){for(var a=k.length;a--;)for(var b in k[a].finger){var h=d.Event("fingerup",{id:b,x:c.x,y:c.y,originalEvent:c});
k[a].fingerUp(h)}};OCBNET.Gestures.Finger=function(c){this.id=c.id;this.x=c.x;this.y=c.y};(function(c){c.init=[];c.fingerDown=function(a){var b=new OCBNET.Gestures.Finger(a);"undefined"==typeof e[a.id]&&(e[a.id]=new OCBNET.Gestures.Finger(a));a=new d.Event("handstart",{dx:0,dy:0,finger:b,gesture:this,originalEvent:a});d(this.el).triggerHandler(a);a.isDefaultPrevented()||this.hasFinger(b.id)||(this.fingers++,this.maximum<this.fingers&&(this.maximum=this.fingers),this.ordered.push(b.id),this.finger[b.id]=
b,this.start={center:this.getCenter(),rotation:this.getRotation(),distance:this.getDistance()},this.offset={x:0,y:0},this.center=this.start.center,this.distance=this.rotation=0,f[b.id]||(f[b.id]=[]),f[b.id].push(this),this.move=d.extend({},this.start))};c.fingerMove=function(a){var b=a.id;if(this.hasFinger(b)){var h=this.getFinger(b);h.x=a.x;h.y=a.y;var c=e[b].x-a.x,f=e[b].y-a.y;this.move={center:this.getCenter(),rotation:this.getRotation(),distance:this.getDistance()};this.offset={x:this.move.center.x-
this.start.center.x,y:this.move.center.y-this.start.center.y};this.center=this.move.center;this.rotation=this.move.rotation-this.start.rotation;this.distance=this.move.distance-this.start.distance;var b=Math.abs(this.offset.x),g=Math.abs(this.offset.y);a={dx:c,dy:f,finger:h,gesture:this,originalEvent:a};d(this.el).triggerHandler(new d.Event("handmove",a));"undefined"==typeof this.swipeSector&&(this.config.decideOnFirst||Math.pow(this.config.swipeMinDistance,2)<b*b+g*g)&&(h=180*Math.atan2(g,b)/Math.PI,
this.swipeSector=parseInt(h/90*this.config.swipeSectors,10),this.swipeSector=Math.min(this.swipeSector,this.config.swipeSectors-1));"undefined"!=typeof this.swipeSector&&d(this.el).triggerHandler(new d.Event("handswipe",a));1<this.fingers&&d(this.el).triggerHandler(new d.Event("handtransform",a))}};c.fingerUp=function(a){var b=a.id;if(this.hasFinger(b)){var h=this.getFinger(b);h.x=a.x;h.y=a.y;var c=e[b].x-a.x;a=e[b].y-a.y;this.stop={center:this.getCenter(),rotation:this.getRotation(),distance:this.getDistance()};
this.offset={x:this.stop.center.x-this.start.center.x,y:this.stop.center.y-this.start.center.y};this.center=this.stop.center;this.rotation=this.stop.rotation-this.start.rotation;this.distance=this.stop.distance-this.start.distance;c=new d.Event("handstop",{dx:c,dy:a,finger:h,gesture:this});d(this.el).triggerHandler(c);this.fingers--;delete this.offset;delete this.rotation;delete this.distance;delete this.swipeSector;h=d.inArray(h.id,this.ordered);this.ordered.splice(h,1);delete this.finger[b];h=d.inArray(this,
f[b]);-1!=h&&f[b].splice(h,1);0==f[b].length&&(delete e[b],delete f[b])}};c.getCenter=function(){var a={x:0,y:0},b;for(b in this.finger){var c=this.finger[b];a.x+=c.x;a.y+=c.y}this.fingers&&(a.x/=this.fingers,a.y/=this.fingers);return a};c.getRotation=function(){if(2>this.fingers)return 0;for(var a=0,b=0,c=0,d=0,f=this.ordered.length;d<f;d++)for(var g=this.finger[this.ordered[d]],e=d+1;e<f;e++){c++;var k=this.finger[this.ordered[e]],a=a+(k.x-g.x),b=b+(k.y-g.y)}return 180*Math.atan2(b/c,a/c)/Math.PI};
c.getDistance=function(){if(2>this.fingers)return 0;for(var a=0,b=0,c=0,d=0,f=this.ordered.length;d<f;d++)for(var g=this.finger[this.ordered[d]],e=d+1;e<f;e++){c++;var k=this.finger[this.ordered[e]],a=a+Math.abs(k.x-g.x),b=b+Math.abs(k.y-g.y)}a/=c;b/=c;return Math.sqrt(a*a+b*b)};c.hasFinger=function(a){return a in this.finger};c.getFinger=function(a){return this.finger[a]}})(OCBNET.Gestures.prototype);d.fn.gesture=function(c){d(this).each(function(a,b){var f=d(b).data("gesture");if("undefined"==typeof f)f=
new OCBNET.Gestures(b,c),d(b).data("gesture",f);else{if(0<f.fingers)throw"fatal: live config change";d.extend(f.config,c,!0)}});return this}})(jQuery);
(function(d){"ontouchstart"in window&&!(window.navigator.msPointerEnabled&&0<window.navigator.msMaxTouchPoints)&&(function(e){e.init.push(function(e){var g=this;d(e).bind("touchstart",function(f){var c=f.originalEvent.changedTouches||[],a=d(f.currentTarget).data("gesture");a!==g&&eval("alert('assertion')");d(c).each(function(c,e){var g=new d.Event("fingerdown",{type:"touch",x:e.clientX||e.screenX,y:e.clientY||e.screenY,id:e.identifier,originalEvent:f});a.fingerDown(g)})});d(e).bind("handswipe",function(d){2==
d.gesture.config.swipeSectors&&(0===d.gesture.swipeSector&&d.gesture.config["native"].panY&&d.preventDefault(),1===d.gesture.swipeSector&&d.gesture.config["native"].panX&&d.preventDefault())})})}(OCBNET.Gestures.prototype),d(document).bind("touchend touchcancel",function(e){d(e.originalEvent.changedTouches||[]).each(function(k,g){var f=d.Event("fingerup",{type:"touch",x:g.clientX||g.screenX,y:g.clientY||g.screenY,id:g.identifier,originalEvent:e});OCBNET.Gestures.fingerup(f)})}),d(document).bind("touchmove",
function(e){d(e.originalEvent.changedTouches||[]).each(function(k,g){var f=d.Event("fingermove",{type:"touch",x:g.clientX||g.screenX,y:g.clientY||g.screenY,id:g.identifier,originalEvent:e});OCBNET.Gestures.fingermove(f)})}))})(jQuery);
(function(d){if(window.navigator.msPointerEnabled&&0<window.navigator.msMaxTouchPoints){var e={up:"MSPointerUp",move:"MSPointerMove",down:"MSPointerDown",cancel:"MSPointerCancel",action:"ms-touch-action"};window.navigator.pointerEnabled&&0<window.navigator.maxTouchPoints&&(e={up:"pointerup",move:"pointermove",down:"pointerdown",cancel:"pointercancel",action:"touch-action"});(function(g){g.init.push(function(f){var c=this,a=[],b=this.config["native"]||{};b.panY&&a.push("pan-y");b.panX&&a.push("pan-x");
0==a.length&&a.push("none");d(f).bind(e.down,function(a){var b=a.originalEvent,e=d(a.currentTarget).data("gesture");e!==c&&eval("alert('assertion')");a=new d.Event("fingerdown",{type:"pointer",x:b.pageX,y:b.pageY,id:b.pointerId,originalEvent:a});e.fingerDown(a)}).css(e.action,a.join(" "))})})(OCBNET.Gestures.prototype);var k=[e.up,e.cancel].join(" ");d(document).bind(k,function(e){var f=e.originalEvent;e=new d.Event("fingerup",{type:"pointer",x:f.pageX,y:f.pageY,id:f.pointerId,originalEvent:e});OCBNET.Gestures.fingerup(e)});
d(document).bind(e.move,function(e){var f=e.originalEvent;e=d.Event("fingermove",{type:"pointer",x:f.pageX,y:f.pageY,id:f.pointerId,originalEvent:e});OCBNET.Gestures.fingermove(e)})}})(jQuery);
